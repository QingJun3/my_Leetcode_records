---
title: Leetcode每日一题：122.买卖股票的最佳时机Ⅱ
tags: ["Leetcode","C++"]
---

思路：首先我们需要分析股票价格序列的情况，他是随机的，但可以分四种情况讨论，递增、递减、先递增在递减和先递减再递增。显然，后两种情况是前两种的组合，实际上，整个序列就是由递增的段和递减的段组合而成，但为了方便说明，加入了后两段。

我们先说递增和递减。

* 当股票价格递增时，最直观的想法最大利润是最高点减最低点，但其实两两相邻的点的差的和也等于最高点减最低点，也就是最大利润，则当我们遇到递增的情况，只需要连续进行 $price[i] - price[i-1]$ 即可；
* 当股票价格递减时，显然不买卖就好了，也就是加 0。

接下来讨论先递增再递减，由递增和递减的情况我们可以知道，递增需要连加 $price[i] - price[i-1]$ ，而这个式子放在递减里是负数，递减时我们不应该买卖，应该加 0 ，那我们就可以得出，对于先递增再递减的情况，连续进行 $ans += max(price[i] - price[i-1],0)$ 即可得到答案，同理先递减后递增。

~~~c++
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        if(prices.size() <= 1) return 0;
        int maxprofit = 0;
        for(int i=1;i<prices.size();++i)
            maxprofit += max(prices[i]-prices[i-1], 0);
        return maxprofit;
    }
};
~~~

- 时间复杂度：O(n)，其中 n 为数组的长度。我们只需要遍历一次数组即可。
- 空间复杂度：O(1)。只需要常数空间存放若干变量。